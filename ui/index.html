<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Digital Advertising Command</title>
  <link rel="stylesheet" href="assets/styles.css">

  <link rel="stylesheet" href="/css/responsive.css">
  <link rel="stylesheet" href="/css/loading.css">
  <link rel="stylesheet" href="/css/animations.css">
</head>
<body>

  <!-- Hamburger Menu (Mobile) -->
  <button class="hamburger-btn" onclick="toggleSidebar()" aria-label="Toggle menu">
    <div class="hamburger-icon">
      <span></span>
      <span></span>
      <span></span>
    </div>
  </button>
  
  <!-- Sidebar Overlay (Mobile) -->
  <div class="sidebar-overlay" onclick="closeSidebar()"></div>
  <nav class="sidebar">
    <div class="sidebar-header">
      <h1>ğŸ¯ Digital Ad</h1>
      <span class="subtitle">Command Center</span>
    </div>
    <ul class="nav-links">
      <li><a href="/dashboard" class="nav-link active">ğŸ“ˆ Dashboard</a></li>
      <li><a href="/campaigns" class="nav-link">ğŸ“‹ Campaigns</a></li>
      <li><a href="/insights" class="nav-link">ğŸ’¡ Insights</a></li>
      <li><a href="/agents" class="nav-link">ğŸ¤– Agents</a></li>
      <li><a href="/query" class="nav-link">ğŸ’¬ Query</a></li>
      <li><a href="/architecture" class="nav-link">ğŸ—ï¸ Architecture</a></li>
      <li><a href="/connectors" class="nav-link">ğŸ”Œ Connectors</a></li>
    </ul>
    <div class="sidebar-footer">
      <div class="status-indicator">
        <span class="status-dot online"></span>
        <span>System Online</span>
      </div>
    </div>
  </nav>

  <main class="main-content">
    <header class="page-header">
      <h2>Welcome to Digital Advertising Command</h2>
      <p>Unified platform for managing programmatic advertising across DSPs</p>
    </header>

    <section class="quick-stats">
      <div class="stat-card glass">
        <div class="stat-icon">ğŸ¯</div>
        <div class="stat-content">
          <h3 id="totalCampaigns">--</h3>
          <p>Active Campaigns</p>
        </div>
      </div>
      <div class="stat-card glass">
        <div class="stat-icon">ğŸ’°</div>
        <div class="stat-content">
          <h3 id="totalSpend">--</h3>
          <p>Total Spend</p>
        </div>
      </div>
      <div class="stat-card glass">
        <div class="stat-icon">ğŸ“¡</div>
        <div class="stat-content">
          <h3 id="dspCount">3</h3>
          <p>Connected DSPs</p>
        </div>
      </div>
      <div class="stat-card glass">
        <div class="stat-icon">ğŸ¤–</div>
        <div class="stat-content">
          <h3 id="agentCount">5</h3>
          <p>Active Agents</p>
        </div>
      </div>
    </section>

    <section class="feature-grid">
      <a href="/dashboard" class="feature-card glass">
        <div class="feature-icon">ğŸ“ˆ</div>
        <h3>Dashboard</h3>
        <p>Live pacing, spend vs budget, DSP breakdown</p>
      </a>
      <a href="/campaigns" class="feature-card glass">
        <div class="feature-icon">ğŸ“‹</div>
        <h3>Campaigns</h3>
        <p>Unified campaign list across all DSPs</p>
      </a>
      <a href="/insights" class="feature-card glass">
        <div class="feature-icon">ğŸ’¡</div>
        <h3>Insights</h3>
        <p>WoW reports, trends, anomalies</p>
      </a>
      <a href="/query" class="feature-card glass">
        <div class="feature-icon">ğŸ’¬</div>
        <h3>Query</h3>
        <p>Ask anything in natural language</p>
      </a>
    </section>

    <section class="dsp-grid">
      <h3>Connected DSPs</h3>
      <div class="dsp-cards">
        <div class="dsp-card glass ttd">
          <span class="dsp-name">The Trade Desk</span>
          <span class="dsp-status">Connected</span>
        </div>
        <div class="dsp-card glass dv360">
          <span class="dsp-name">DV360</span>
          <span class="dsp-status">Connected</span>
        </div>
        <div class="dsp-card glass amazon">
          <span class="dsp-name">Amazon DSP</span>
          <span class="dsp-status">Connected</span>
        </div>
      </div>
    </section>
  </main>

  <script src="assets/app.js"></script>
  <script>
    // Load quick stats
    async function loadQuickStats() {
      try {
        const campaigns = await fetch('/api/campaigns').then(r => r.json());
        const liveCampaigns = campaigns.filter(c => c.status === 'live');
        
        document.getElementById('totalCampaigns').textContent = liveCampaigns.length;
        
        const totalSpend = liveCampaigns.reduce((sum, c) => sum + (c.spent || 0), 0);
        document.getElementById('totalSpend').textContent = '$' + totalSpend.toLocaleString();
      } catch (err) {
        console.error('Error loading stats:', err);
      }
    }
    
    loadQuickStats();
  </script>

  <script src="/components/loading.js"></script>
  <script src="/components/errors.js"></script>
  <script src="/components/navigation.js"></script>

  <script>
    // Sidebar toggle for mobile
    function toggleSidebar() {
      const sidebar = document.querySelector('.sidebar');
      const hamburger = document.querySelector('.hamburger-btn');
      const overlay = document.querySelector('.sidebar-overlay');
      
      sidebar.classList.toggle('open');
      hamburger.classList.toggle('open');
      overlay.classList.toggle('active');
    }
    
    function closeSidebar() {
      const sidebar = document.querySelector('.sidebar');
      const hamburger = document.querySelector('.hamburger-btn');
      const overlay = document.querySelector('.sidebar-overlay');
      
      sidebar.classList.remove('open');
      hamburger.classList.remove('open');
      overlay.classList.remove('active');
    }
    
    // Close sidebar on navigation
    document.querySelectorAll('.sidebar .nav-link').forEach(link => {
      link.addEventListener('click', closeSidebar);
    });
  </script>
</body>
</html>
